<div class="dialog">
<script>
	//ダイアログの要素をjQueryオブジェクトで取得する。
	$dialog = $('.dialog:last');
	dialogClass = $dialog[0].instance;
	//ダイアログのコンテンツを生成するためにcreateLittleContentsのインスタンスを生成する
	// var dialogClass.dialogCreator = new createLittleContents();
	// $dialog.off();	//ダイアログに設定されているイベントを一旦全て破棄する
	//管理者授業詳細一覧のjsonを取得する
	dialogClass.dialogCreator.getJsonFile('source/adminCommon.json');
	//管理者授業詳細のテンプレートを取得する
	dialogClass.dialogCreator.getDomFile('template/adminCommon.html');
	
	//ダイアログのタイトルバーのフォントサイズを15pxに設定する
	$dialog.prev().css('font-size', '15px');

	//受け取った値を	変数に入れて扱いやすくする
	var receivedObject = dialogClass.getArgumentDataObject();
	//受講する授業のテーマを入れる
	dialogClass.dialogCreator.json.lessonData.themeArea.themeDetailText.text = receivedObject['lesson_name'];
	//受講する授業の時間割を入れる
	dialogClass.dialogCreator.json.lessonData.timeTableArea.timeTableText.text = receivedObject['time_schedule'];

	//授業データ入力領域を作る
	dialogClass.dialogCreator.outputTag('lessonData', 'lessonData', '.dialog:last');
	//ボタン領域を作る
	dialogClass.dialogCreator.outputTag('buttonArea', 'buttonArea', '.dialog:last');

	//連想配列のデータをダイアログの各要素に配置していく
	setValueDBdata(receivedObject, '.lessonData', 'keyTable');
	
	//ボタンをjqueryuiのものにしてレイアウトを整える
	$('input[type="button"]').button();
	//授業詳細ダイアログで更新ボタンがクリックされた時、DBの値を更新する
	$dialog.on(CLICK, '.updateButton', function() {
		//入力した値を取得し、データの更新に用いる
		var updateData = getInputData('lessonData');
		//授業idを取得する
		updateData['classwork_key'] = receivedObject['classwork_key'];
		//授業詳細テーブルを更新する
		dialogClass.dialogCreator.setDBdata(
				dialogClass.dialogCreator.json.lessonDetailUpdate,
				updateData, 
				'授業情報の更新に成功しました。'
			);
	});
</script>
</div>
