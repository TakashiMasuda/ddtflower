<div class="reserveLessonListContent">
	<script>
	ERROR_LESSONLIST = '予約可能な授業がありません';
	//イベントが重複して起こらないようにイベントを先にオフにする
	$('.reserveLessonListContent').off();
	//ダイアログのコンテンツを生成するためにcreateTagのインスタンスを生成する
	var reserveLessonListCreator = new createLittleContents();
	//キャンセル時に必要なクエリがあるため、会員ページのJSONを取得する
	reserveLessonListCreator.getJsonFile('source/memberPage.json');
	//会員、予約授業一覧のjsonを取得する
	reserveLessonListCreator.getJsonFile('source/eachDayLesson.json');
	//会員、予約授業一覧のテンプレートを取得する
	reserveLessonListCreator.getDomFile('template/eachDayLesson.html');
	//ダイアログの中身の外枠を作る
	reserveLessonListCreator.outputTag('memberInfomation', 'memberInfomation', '.reserveLessonListContent');
	
	var dialogClass = $('.reserveLessonListContent')[0].instance;	//ダイアログのクラスインスタンスを取得する
	var data = dialogClass.getArgumentDataObject();						//dataオブジェクトを取得する
	
	//dbに接続する前に日付をクエリの置換連想配列に挿入する
	reserveLessonListCreator.json.lessonTable.lessonDate.value = data.lessonDate;
	//dbに接続する前に会員番号をクエリの置換連想配列に挿入する
	reserveLessonListCreator.json.lessonTable.user_key.value = data.userId;
	//予約可能授業一覧テーブルの外側の領域を作る
	reserveLessonListCreator.outputTag('lessonTableOutsideArea', 'lessonTableOutsideArea', '.memberInfomation')
	//予約できる授業のデータ一覧をDBから取得してテーブルを作る準備をする
	reserveLessonListCreator.getJsonFile(URL_GET_JSON_ARRAY_PHP, reserveLessonListCreator.json['lessonTable'], 'lessonTable');

	//取得したデータが0のときダイアログを開いても閉じ,データがあるならそのままダイアログを開く
	if (reserveLessonListCreator.json['lessonTable'].table.length == 0) {
		//授業の予約データがないことをダイアログに表示する
		dialogClass.setAlertContents(ERROR_LESSONLIST);
	//予約する授業のデータがある時は予約できる授業の一覧を表示する
	} else {
		//予約できる授業のデータ一覧テーブルを作る
		reserveLessonListCreator.outputTagTable('lessonTable', 'lessonTable', '.lessonTableOutsideArea');
		//テーブルの値をクライアント側で編集して画面に表示する
		tableReplaceAndSetClass(LESSON_TABLE, LESSON_TABLE_REPLACE_FUNC, true, reserveLessonListCreator, LESSON_TABLE_RECORD);
		//レッスンのステータス領域を作る
		reserveLessonListCreator.outputTag('lessonStatus', 'lessonStatus', '.memberInfomation');
		//予約授業一覧テーブルをクリックしたときに予約確認ダイアログを表示するイベントを登録する
		reserveLessonListCreator.openMemberReservedConfirmDialog();
	}
</script>
</div>



