<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DDTFlowers/プリザーブドフラワー</title>

</head>
<body>
	<div id="container">
		<div class="main">
			<!-- コース案内のCSSファイルを読み込む。 -->
			<link href="css/courseguide.css" rel="stylesheet" type="text/css">
			<!-- ギャラリーページのCSSファイルを読み込む。 -->
			<link href="css/gallery.css" rel="stylesheet" type="text/css">
			<!-- jqueryUIのcssを読み込む -->
			<link type="text/css" href="css/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
			<!-- fancyboxのCSSを読み込む。 -->
			<link rel="stylesheet" type="text/css" href="js/source/jquery.fancybox.css" media="screen" />
			<script>
				hideNormalHeader();	//通常ページのヘッダーを隠す
				// dom要素を作るクラスをインスタンス化する
				var myGalleryCreator = new createTag();
				myGalleryCreator.getJsonFile('source/mygallery.json');			// Myギャラリーページ用のJSONデータを取得する。
				myGalleryCreator.getJsonFile('source/commonJson.json');		// 各ページ共通のパーツのJSONデータを取得する。
				// HTMLのテンプレートデータをを取得する。
				myGalleryCreator.getDomFile('template/common.html');			
				myGalleryCreator.getDomFile('template/gallery.html');			
				
				// 会員共通のパーツのJSONを取得する。
				myGalleryCreator.getDomFile('template/memberCommon.html');
				// 会員ページのjsonを読み込む
				myGalleryCreator.getDomFile('template/memberPage.html');
				//ユーザ情報のテキストをDBから取得する
				myGalleryCreator.getJsonFile('php/GetJSONString.php', myGalleryCreator.json['memberHeader'], 'memberHeader');
				// 会員ページヘッダーを作る
				myGalleryCreator.outputTag('memberHeader');
				// バナー領域を作る
				myGalleryCreator.outputTag('userBanner');

				// creator.outputTag('headImage', 'createImage');		// 天の画像を作る
				myGalleryCreator.outputTag('pageTitle');						// タイトル領域を作る
				myGalleryCreator.outputTag('myGalleryEditButtons');			// ギャラリー編集用のボタンを作る。
				//ギャラリーのちょっとした説明を付け足す。
				myGalleryCreator.outputTag('myGalleryNotice','myGalleryNotice','.myGalleryEditButtons');	
				myGalleryCreator.outputTag('memberMyGallery');						// ギャラリーページ用のギャラリーを作る。
				// ナンバリング領域を作る
				myGalleryCreator.outputTag('numberingOuter');
				
				//ユーザのギャラリーのJSONに会員IDをセットする。
				myGalleryCreator.json.myGalleryTable.user_key.value = myGalleryCreator.json.memberHeader.user_key.value;
				//ユーザのギャラリー情報を取得する
				myGalleryCreator.getJsonFile('php/GetJSONArray.php', myGalleryCreator.json['myGalleryTable'], 'myGalleryTable');
				//ギャラリーの内容を追加する。
				myGalleryCreator.outputNumberingTag('myGalleryTable', 1, 4, 1, 1, '.memberMyGallery', 'createMyGalleryImages');	// ブログの記事を作る。

				//ギャラリーの画像を拡大できるようにする。
				useZoomImage('myGalleryTable tr a');
				//jQuery UIのリッチなボタンを配置する。
				$('.myGalleryEditButtons button').button();
				//新規ボタンをクリックしたらアップロードするボタンを押すイベントを登録する。
				bindClickTarget('.myGalleryEditButtons .createButton', '.myGalleryEditButtons .uploader');
				//画像アップローダーの値が変わったときのイベントを定義する。
				setMyGalleryChangeEvent('.myGalleryEditButtons .uploader');
				//削除ボタンがクリックされた時にギャラリーコンテンツを削除するイベントを登録する
				deleteMyGalleryPhoto();
				addlogoutEvent('.logoutLink');	//ログアウトボタンのイベントを登録する。
				</script>
		</div>
	</div>
</body>
</html>