<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DDTFlowers/管理者画面</title>
</head>
<body>
	<div id="container">
		<div class="main">
			<script>
				//編集するコンテンツのリストを作る。
				var contentList = ['commonJson','preserved','fresh','nfd','national','franchise',
				                   'bridal','gallery','contact','access','experience','blog'];
				var listLength = contentList.length;			//コンテンツのリストの数を取得する。
				creator.getJsonFile('source/admin.json');		// 管理者画面のJSONを取得する。
				creator.getJsonFile('source/commonJson.json');	// 共通のパーツのJSONを取得する。
				creator.getJsonFile('source/customize.json');	// カスタマイズタブのJSONを読み込む。
				creator.getDomFile('source/template.html');		// ファイルのhtmlデータをdomを用いて持ってくる

				//編集用にJSONのファイルを読み込むループ
				for(var i = 0; i < listLength; i++){
					//各コンテンツのJSONファイルを編集用に読み込む。
					creator.getJsonForCustomize(contentList[i], 'source/' + contentList[i] + '.json');
				}
				
				// 管理者画面のコンテンツを作る。
				creator.outputTag('contentManagement', 'tabContainer', '#customize');
				creator.outputTag('customizeTabs', 'customizeTabs', '#customize .contentManagement');
				creator.outputTag('customizePanels', 'customizePanels', '#customize .contentManagement');

				//編集用にJSONのファイルを読み込み、編集用のタグを作るループ
				for(var i = 0; i < listLength; i++){
					$.when(
							//各コンテンツのJSONファイルを編集用に読み込む。
							creator.getJsonForCustomize(contentList[i], 'source/' + contentList[i] + '.json')
							).done(function(){
								//JSON編集用のテキストエリアを作る。
								creator.createElementTag(new Array(), creator.json[contentList[i]], $('#'+ contentList[i]));
							});
				}
				
				//タブのコンテンツを作成する。
				createTab('#customize .contentManagement');
				//アップロードボタンを押してファイルを選択するイベントを定義する関数をコールする。
				clickButtonToFile('#customize .value', '#customize textarea');
				//テキストエリアをクリックしたら編集ダイアログを出す。
				useEditDialog('.editValue');
				//保存ボタンをjQuery UIのリッチなボタンにする。
				$('.saveButton').button();
			</script>
		</div>
	</div>
</body>
</html>